<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Orchids Account Management - All-2-API</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/css/common.css">
    <link rel="stylesheet" href="/css/styles.css">
</head>
<body>
    <div class="app-container">
        <div id="sidebar-container"></div>

        <main class="main-content">
            <header class="header">
                <div class="header-left">
                    <div class="page-title-section">
                        <div class="page-icon orchids">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2z"/>
                                <circle cx="12" cy="12" r="3"/>
                            </svg>
                        </div>
                        <div>
                            <h1 class="page-title">Orchids Account Management</h1>
                            <p class="page-subtitle">Manage your Orchids AI account pool</p>
                        </div>
                    </div>
                </div>
                <div class="header-center">
                    <div class="search-box">
                        <svg class="search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="11" cy="11" r="8"/>
                            <path d="M21 21l-4.35-4.35"/>
                        </svg>
                        <input type="text" id="search-input" placeholder="Search accounts...">
                    </div>
                </div>
                <div class="header-right">
                    <button class="btn btn-primary" id="add-account-btn">
                        <svg class="btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="12" y1="5" x2="12" y2="19"/>
                            <line x1="5" y1="12" x2="19" y2="12"/>
                        </svg>
                        Add Account
                    </button>
                    <button class="btn btn-secondary" id="batch-import-btn">
                        <svg class="btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                            <polyline points="17 8 12 3 7 8"/>
                            <line x1="12" y1="3" x2="12" y2="15"/>
                        </svg>
                        Batch Import
                    </button>
                    <button class="btn btn-warning" id="auto-register-btn">
                        <svg class="btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"/>
                            <path d="M12 6v6l4 2"/>
                        </svg>
                        Auto Register
                    </button>
                </div>
            </header>

            <!-- Statistics Cards -->
            <div class="stats-cards" id="stats-cards">
                <div class="stat-card">
                    <div class="stat-icon" style="background: linear-gradient(135deg, #9c27b0, #e91e63);">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
                            <circle cx="9" cy="7" r="4"/>
                            <path d="M23 21v-2a4 4 0 0 0-3-3.87"/>
                            <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
                        </svg>
                    </div>
                    <div class="stat-content">
                        <div class="stat-value" id="stat-total-accounts">0</div>
                        <div class="stat-label">Total Accounts</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon success">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
                            <polyline points="22 4 12 14.01 9 11.01"/>
                        </svg>
                    </div>
                    <div class="stat-content">
                        <div class="stat-value" id="stat-active-accounts">0</div>
                        <div class="stat-label">Active Accounts</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon info">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"/>
                            <path d="M12 6v12M8 10h8M8 14h8"/>
                        </svg>
                    </div>
                    <div class="stat-content">
                        <div class="stat-value" id="stat-total-quota">-</div>
                        <div class="stat-label">Total Quota</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon warning">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M13 10V3L4 14h7v7l9-11h-7z"/>
                        </svg>
                    </div>
                    <div class="stat-content">
                        <div class="stat-value" id="stat-used-quota">-</div>
                        <div class="stat-label">Used Quota</div>
                    </div>
                </div>
            </div>

            <div class="content-area" id="orchids-page">
                <div class="content-header">
                    <div class="content-header-left">
                        <div class="select-all-wrapper">
                            <input type="checkbox" class="checkbox-custom" id="select-all">
                            <label class="select-label" for="select-all">Select All</label>
                        </div>
                        <span class="account-count"><strong id="displayed-count">0</strong> accounts</span>
                    </div>
                    <div class="content-header-right">
                        <button class="btn btn-secondary btn-sm" id="refresh-all-btn">
                            <svg class="btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="23 4 23 10 17 10"/>
                                <path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"/>
                            </svg>
                            Refresh Usage
                        </button>
                        <button class="btn btn-danger btn-sm" id="batch-delete-btn" style="display: none;">
                            <svg class="btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="3 6 5 6 21 6"/>
                                <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/>
                            </svg>
                            Batch Delete
                        </button>
                    </div>
                </div>

                <div class="cards-grid" id="cards-grid"></div>

                <div class="empty-state" id="empty-state" style="display: none;">
                    <svg class="empty-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2z"/>
                        <circle cx="12" cy="12" r="3"/>
                    </svg>
                    <h3 class="empty-title">No Orchids Accounts</h3>
                    <p class="empty-description">Click the button below to add your first Orchids account</p>
                    <button class="btn btn-primary" id="empty-add-btn">
                        <svg class="btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="12" y1="5" x2="12" y2="19"/>
                            <line x1="5" y1="12" x2="19" y2="12"/>
                        </svg>
                        Add Account
                    </button>
                </div>
            </div>
        </main>
    </div>

    <!-- Add Account Modal -->
    <div class="modal-overlay" id="add-modal">
        <div class="modal">
            <div class="modal-header">
                <h2 class="modal-title">Add Orchids Account</h2>
                <button class="modal-close" id="modal-close">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18"/>
                        <line x1="6" y1="6" x2="18" y2="18"/>
                    </svg>
                </button>
            </div>
            <div class="modal-body">
                <form id="add-account-form">
                    <div class="form-group">
                        <label class="form-label">Client Cookie (__client) <span class="required">*</span></label>
                        <div class="input-with-button">
                            <textarea class="form-input" id="client-jwt" rows="4" placeholder="Paste the __client cookie value..." required></textarea>
                            <button type="button" class="btn btn-secondary btn-sm" id="paste-jwt-btn">Paste</button>
                        </div>
                        <p class="form-hint">Get the __client value from browser cookies</p>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Account Name <span class="optional">(Optional)</span></label>
                        <input type="text" class="form-input" id="account-name" placeholder="Leave empty to use email as name">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Weight <span class="optional">(Optional)</span></label>
                        <input type="number" class="form-input" id="account-weight" value="1" min="1">
                        <p class="form-hint">Higher values increase the selection probability</p>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="modal-cancel">Cancel</button>
                <button class="btn btn-primary" id="modal-submit">
                    <svg class="btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="20 6 9 17 4 12"/>
                    </svg>
                    Add Account
                </button>
            </div>
        </div>
    </div>

    <!-- Batch Import Modal -->
    <div class="modal-overlay" id="batch-import-modal">
        <div class="modal modal-lg">
            <div class="modal-header">
                <h2 class="modal-title">Batch Import Accounts</h2>
                <button class="modal-close" id="batch-modal-close">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18"/>
                        <line x1="6" y1="6" x2="18" y2="18"/>
                    </svg>
                </button>
            </div>
            <div class="modal-body">
                <div class="import-tabs">
                    <button class="import-tab active" data-tab="json">JSON Format</button>
                    <button class="import-tab" data-tab="text">Text Format</button>
                </div>
                <form id="batch-import-form">
                    <div class="import-content">
                        <div class="import-panel active" id="json-panel">
                            <div class="form-group">
                                <label class="form-label">JSON Data</label>
                                <textarea class="form-input" id="batch-import-json" rows="10" placeholder='[
  {"email": "user1@example.com", "clientJwt": "eyJhbGc..."},
  {"email": "user2@example.com", "refreshToken": "eyJhbGc..."}
]'></textarea>
                            </div>
                        </div>
                        <div class="import-panel" id="text-panel">
                            <div class="form-group">
                                <label class="form-label">Text Data (one account per line)</label>
                                <textarea class="form-input" id="batch-import-text" rows="10" placeholder="user1@example.com eyJhbGc...
user2@example.com eyJhbGc..."></textarea>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="batch-cancel">Cancel</button>
                <button class="btn btn-primary" id="batch-import-submit">
                    <svg class="btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="20 6 9 17 4 12"/>
                    </svg>
                    Import
                </button>
            </div>
        </div>
    </div>

    <!-- Detail Modal -->
    <div class="modal-overlay" id="detail-modal">
        <div class="modal" style="max-width: 600px;">
            <div class="modal-header">
                <h2 class="modal-title">Account Details</h2>
                <button class="modal-close" id="detail-modal-close">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18"/>
                        <line x1="6" y1="6" x2="18" y2="18"/>
                    </svg>
                </button>
            </div>
            <div class="modal-body" id="detail-modal-body">
                <!-- Content will be populated by JS -->
            </div>
            <div class="modal-footer">
                <button class="btn btn-danger" id="detail-delete-btn">Delete</button>
                <button class="btn btn-secondary" onclick="closeDetailModal()">Close</button>
                <button class="btn btn-primary" id="detail-edit-btn">
                    <svg class="btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/>
                        <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/>
                    </svg>
                    Edit
                </button>
            </div>
        </div>
    </div>

    <!-- Edit Modal -->
    <div class="modal-overlay" id="edit-modal">
        <div class="modal">
            <div class="modal-header">
                <h2 class="modal-title">Edit Orchids Account</h2>
                <button class="modal-close" id="edit-modal-close">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18"/>
                        <line x1="6" y1="6" x2="18" y2="18"/>
                    </svg>
                </button>
            </div>
            <div class="modal-body">
                <form id="edit-account-form">
                    <input type="hidden" id="edit-account-id">
                    <div class="form-group">
                        <label class="form-label">Name <span class="required">*</span></label>
                        <input type="text" class="form-input" id="edit-account-name" placeholder="Account name" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Weight</label>
                        <input type="number" class="form-input" id="edit-account-weight" value="1" min="1">
                        <p class="form-hint">Higher values increase the selection probability</p>
                    </div>
                    <div class="form-group">
                        <label class="form-label">
                            <input type="checkbox" id="edit-is-active"> Active
                        </label>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="edit-modal-cancel">Cancel</button>
                <button class="btn btn-primary" id="edit-modal-submit">
                    <svg class="btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="20 6 9 17 4 12"/>
                    </svg>
                    Save Changes
                </button>
            </div>
        </div>
    </div>

    <!-- Auto Register Modal -->
    <div class="modal-overlay" id="register-modal">
        <div class="modal modal-lg">
            <div class="modal-header">
                <h2 class="modal-title">Auto Register Account</h2>
                <button class="modal-close" id="register-modal-close">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18"/>
                        <line x1="6" y1="6" x2="18" y2="18"/>
                    </svg>
                </button>
            </div>
            <div class="modal-body">
                <div class="register-config" id="register-config">
                    <div class="form-group">
                        <label class="form-label">Registration Count</label>
                        <input type="number" class="form-input" id="register-count" value="1" min="1" max="50">
                        <p class="form-hint">Each account registration takes approximately 1-2 minutes</p>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Prerequisites</label>
                        <ul style="margin: 0; padding-left: 20px; color: var(--text-secondary);">
                            <li>Install Python 3.8+</li>
                            <li>Install Chrome browser</li>
                            <li>Install dependencies: <code>pip install undetected-chromedriver selenium requests</code></li>
                        </ul>
                    </div>
                </div>
                <div class="register-progress" id="register-progress" style="display: none;">
                    <div class="form-group">
                        <label class="form-label">Progress: <span id="progress-current">0</span>/<span id="progress-total">0</span></label>
                        <div style="display: flex; gap: 16px; margin-bottom: 8px;">
                            <span style="color: var(--success-color);">Success: <span id="progress-success">0</span></span>
                            <span style="color: var(--error-color);">Failed: <span id="progress-failed">0</span></span>
                        </div>
                        <div class="progress-bar-container" style="height: 8px; background: var(--bg-tertiary); border-radius: 4px;">
                            <div class="progress-bar" id="progress-bar" style="width: 0%; height: 100%; background: var(--primary-color); border-radius: 4px; transition: width 0.3s;"></div>
                        </div>
                    </div>
                    <div class="register-logs" id="register-logs" style="max-height: 200px; overflow-y: auto; background: var(--bg-tertiary); padding: 12px; border-radius: 8px; font-family: monospace; font-size: 12px;"></div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="register-modal-cancel">Close</button>
                <button class="btn btn-danger" id="register-cancel-btn" style="display: none;">Cancel Task</button>
                <button class="btn btn-primary" id="register-start-btn">
                    <svg class="btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polygon points="5 3 19 12 5 21 5 3"/>
                    </svg>
                    Start Registration
                </button>
            </div>
        </div>
    </div>

    <!-- Context Menu -->
    <div class="context-menu" id="context-menu">
        <div class="context-menu-item" data-action="details">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="12" cy="12" r="10"/>
                <line x1="12" y1="16" x2="12" y2="12"/>
                <line x1="12" y1="8" x2="12.01" y2="8"/>
            </svg>
            View Details
        </div>
        <div class="context-menu-item" data-action="toggle">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
                <polyline points="22 4 12 14.01 9 11.01"/>
            </svg>
            Toggle Active
        </div>
        <div class="context-menu-divider"></div>
        <div class="context-menu-item danger" data-action="delete">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="3 6 5 6 21 6"/>
                <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/>
            </svg>
            Delete
        </div>
    </div>

    <div class="toast-container" id="toast-container"></div>

    <script src="/js/common.js"></script>
    <script src="/js/orchids.js"></script>
</body>
</html>
